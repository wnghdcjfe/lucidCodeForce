"use strict";

var toIter = require("../Strict/toIter.js");

var go = require("../Strict/go.js");

var rangeLazy = require("../Lazy/rangeLazy.js");

var mapLazy = require("../Lazy/mapLazy.js");

var takeUntilLazy = require("../Lazy/takeUntilLazy.js");

var reject = require("../Strict/reject.js");

var flatMapLazy = require("../Lazy/flatMapLazy.js");

var catchNoopIter = require("../.internal/catchNoopIter.js");

module.exports = takeAllLazyC;

function takeAllLazyC(n, iter) {
  if (arguments.length == 1) return typeof n == 'number' ? _ => takeAllLazyC(n, _) : n;
  if (n == Infinity) return iter;
  iter = toIter(iter);
  return go(rangeLazy(Infinity), mapLazy(_ => go(rangeLazy(n), mapLazy(_ => iter.next()), reject(a => a.done), catchNoopIter)), takeUntilLazy(a => a.length < n), flatMapLazy(mapLazy(a => a.value)));
}