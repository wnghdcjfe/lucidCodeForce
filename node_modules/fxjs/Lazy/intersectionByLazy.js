"use strict";

require("core-js/modules/es.array.iterator");

require("core-js/modules/es.set");

var filterLazy = require('./filterLazy.js');

var mapLazy = require('./mapLazy.js');

var uniqueLazy = require('./uniqueLazy.js');

var curry2 = require("../Strict/curry2.js");

var go1 = require('../Strict/go1.js');

var go = require('../Strict/go.js');

module.exports = curry2(function intersectionByLazy(f, iter2, iter1) {
  let set = null;
  return uniqueLazy(filterLazy(a => go1(set || go1(mapLazy(f, iter2), l => set = new Set(l)), set => go(a, f, b => set.has(b))), iter1));
});